import{g as j,P as H,p as J,a as K}from"./AccountApi.5c83433a.js";import{h as Z}from"./axios.e8a5cbbb.js";import{u as ee}from"./userStore.e55b1a77.js";import{d as te,X as T,r as u,a1 as ne,O as k,P as s,R as l,Q as p,Y as C,a as o,o as i,a2 as O,c as F,W as E,a3 as b,$ as c,a4 as B,a5 as ae}from"./vendor.aad8767c.js";import{A as oe}from"./Common.3d44b0f0.js";import{_ as se}from"./plugin-vue_export-helper.21dcd24c.js";const ce="/accountType",ue=ce+"/getAccountTypeAll";function le(){return Z.get(ue)}const ie={class:"action"},re=["onClick"],de={class:"account-content"},_e={class:"account-money"},me=E(" \u91D1\u989D "),pe={class:"account-types"},ve=te({setup(ge){const w=ee(),r=T([]),v=u(!1),x=u(!1),g=u(new Date),f=g.value.getFullYear(),y=g.value.getMonth(),h=u(""),A=u(""),d=u(!1),t=T(new oe);ne(()=>{let e=new Date(f,y+1,0).getDate();h.value=`${f}-${y+1}-${1}`,A.value=`${f}-${y+1}-${e}`,_(),S()});async function _(){v.value=!0;let e=localStorage.getItem("uid");const n=await j({startTime:h.value,endTime:A.value,uid:e});n.messageCode=="ok"&&n.data.accounts.length>=0&&(r.splice(0,r.length),n.data.accounts.forEach(D=>{r.push(D)}),v.value=!1,x.value=!0)}function I(e){ae.confirm({title:"\u8B66\u544A",message:"\u786E\u8BA4\u5220\u9664,\u5220\u9664\u540E\u5C06\u65E0\u6CD5\u6062\u590D!"}).then(async()=>{console.log(e.aid);const n=await J({aid:e.aid});console.log(n),_()}).catch(()=>{})}async function S(){const e=await le();e.messageCode=="ok"&&(w.accountType=e.data.accountsTypes)}const V=(e,n)=>{let m=new Date(e,n,0).getDate();h.value=`${e}-${n}-${1}`,A.value=`${e}-${n}-${m}`,_()},N=()=>{d.value=!0},P=e=>{const n=/(\.\d{2})/;t.money.search(n)>=0||t.money.search(/\./)>=0&&e=="."||t.money.length>=8||(t.money+=e)},U=()=>{const e=t.money.length-1;t.money=t.money.substring(0,e)},z=async()=>{const e=localStorage.getItem("uid");t.uid=e,t.isEmpty()&&(await K(t)).messageCode=="ok"&&(t.initAccount(),_(),d.value=!1)},M=e=>{t.aid_t=e.aid_t},Y=()=>{t.isOut=t.isOut==0?1:0};return(e,n)=>{const m=o("van-icon"),D=o("van-cell"),L=o("van-list"),q=o("van-field"),G=o("van-grid-item"),Q=o("van-grid"),R=o("van-number-keyboard"),W=o("van-action-sheet");return i(),k(C,null,[s(m,{class:"newAccount",name:"plus",onClick:N,size:"50"}),l("div",ie,[s(H,{onGetDate:V,currentDate:g.value},null,8,["currentDate"])]),s(L,{class:"list",loading:v.value,finished:x.value,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86"},{default:p(()=>[(i(!0),k(C,null,O(c(r),(a,$)=>(i(),F(D,{key:$,title:`${a.type} - ${a.isOut==0?"\u652F\u51FA":"\u6536\u5165"} : ${a.money}\u5143`},{default:p(()=>[E(" \u65F6\u95F4:"+b(a.time)+" ",1),l("span",{class:"delete",onClick:X=>I(a)},"\u5220\u9664",8,re)]),_:2},1032,["title"]))),128))]),_:1},8,["loading","finished"]),s(W,{show:d.value,"onUpdate:show":n[1]||(n[1]=a=>d.value=a),title:"\u6807\u9898"},{default:p(()=>[l("div",de,[l("h4",_e,[me,l("span",{onClick:Y,class:B(["account-isOut",c(t).isOut==0?"out":"in"])},b(c(t).isOut==0?"\u652F\u51FA":"\u6536\u5165"),3)]),s(q,{class:"account-input",modelValue:c(t).money,"onUpdate:modelValue":n[0]||(n[0]=a=>c(t).money=a),readonly:"",clickable:"","input-align":"right",size:"large"},null,8,["modelValue"]),l("div",pe,[s(Q,{"column-num":"3",clickable:""},{default:p(()=>[(i(!0),k(C,null,O(c(w).accountType,(a,$)=>(i(),F(G,{class:B([a.aid_t==c(t).aid_t?"account-active":""]),key:$,text:a.title,onClick:X=>M(a)},null,8,["class","text","onClick"]))),128))]),_:1})]),s(R,{show:!0,theme:"custom","extra-key":".","close-button-text":"\u5B8C\u6210",onClose:z,onInput:P,onDelete:U})])]),_:1},8,["show"])],64)}}});var ke=se(ve,[["__scopeId","data-v-011af492"]]);export{ke as default};
